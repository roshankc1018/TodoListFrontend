/**-----------------------------------------------------------------------------------------
* Copyright © 2021 Progress Software Corporation. All rights reserved.
* Licensed under commercial license. See LICENSE.md in the project root for more information
*-------------------------------------------------------------------------------------------*/
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = require("../../common/util");
/**
 * Persists the intially resolved scrollbar width value.
 */
var SCROLLBAR_WIDTH;
/**
 * @hidden
 *
 * Gets the default scrollbar width accoring to the current environment.
 */
exports.scrollbarWidth = function () {
    // calculate scrollbar width only once, then return the memoized value
    if (isNaN(SCROLLBAR_WIDTH)) {
        var div = document.createElement('div');
        div.style.cssText = 'overflow: scroll; overflow-x: hidden; zoom: 1; clear: both; display: block;';
        div.innerHTML = '&nbsp;';
        document.body.appendChild(div);
        SCROLLBAR_WIDTH = div.offsetWidth - div.scrollWidth;
        document.body.removeChild(div);
    }
    return SCROLLBAR_WIDTH;
};
/**
 * Checks if all columns have a valid user-defined width.
 */
var allColumnsWidthsSet = function (columns) {
    if (!util_1.isPresent(columns) || columns.length === 0) {
        return false;
    }
    return columns.toArray().every(function (column) { return !isNaN(column.width) && column.width > 0; });
};
var ɵ0 = allColumnsWidthsSet;
exports.ɵ0 = ɵ0;
/**
 * @hidden
 *
 * Calculates the row width according to the passed columns width configuration.
 * Hidden columns and such that don't match the provided media query are ignored.
 * If some of the columns don't have a preset width or have an invalid width value, the function returns `null`.
 */
exports.getRowWidthFromColumnsMeta = function (columns) {
    if (!allColumnsWidthsSet(columns)) {
        return null;
    }
    var bordersWidth = 2;
    var initialRowWidht = exports.scrollbarWidth() + bordersWidth;
    return columns.reduce(function (totalWidth, column) {
        if (!column.hidden && column.matchesMedia) {
            totalWidth += parseInt(column.width, 10);
        }
        return totalWidth;
    }, initialRowWidht);
};
